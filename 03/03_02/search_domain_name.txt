
Поиск доменных имен и поддоменов

Поиск доменных имен заключается в способах подбора, предугадывания а также сбора из открытых источников доменных имен организации и делится на активный и пассивный методы.
Методы активного поиска доменных имен и поддоменов

Данный метод подразумевает активное взаимодействие с DNS-cервисом организации, т.е. выполнение запросов  непосредственно к инфраструктуре, принадлежащей, арендуемой или управляемой целевой организацией.

Получение информации о доменных именах и поддоменах от DNS-сервиса организации возможно следующими способами (не ограничиваясь ими):

1. Опрашивание DNS сервиса на известные ему записи раскрывающие доменные имена, связанные с доменом 2-го уровня. Т.е. выполнение запросов к таким DNS записям, как: CNAME, ANY, MX, NS, SRV и т.д.

Пример выполнения запроса: nslookup -q=ANY example.com

2. Перебор доменных имен на DNS сервисе компании при помощи использования словарей или правил мутации. В данном случае мы заранее подготавливаем большой список слов и возможных поддоменов и опрашиваем DNS сервис в формате слово.example.com, чтобы выявить все имена, которые существуют в инфраструктуре организации.

Пример использования утилиты amass (https://github.com/owasp-amass/amass) со стандартным словарем для перебора доменных имен: amass enum -v -src -ip -d example.com

3. Выполнение запроса AXFR. AXFR запрос, или Zone transfer — это процесс передачи копии базы данных с DNS-зоной от главного сервера к вторичному. В идеале трансфер зоны ограничен только для определенных доверенных серверов, но неправильно сконфигурированные серверы разрешают трансферы любому, кто их попросит.

Пример выполнения такого запроса: nslookup -q=AXFR example.com (зачастую требует указания конкретного DNS-сервера, к которому будет отправлен запрос).

Другие примеры инструментов активного поиска:

    amass — многофункциональный инструмент для разведки
    https://github.com/owasp-amass/amass
    
    Sublist3r — OSINT инструмент поиска поддоменов 
    https://github.com/aboul3la/Sublist3r
    
    assetfinder — пассивный сканер поддоменов на Go
    https://github.com/tomnomnom/assetfinder

Методы пассивного поиска доменных имен и поддоменов

Методы пассивного поиска сводятся к использованию каких либо служб и сайтов, которые произвели активный поиск за нас или агрегировали известную информацию среди открытых источников. Есть множество веб-сайтов и служб, которые предлагают такие услуги в разной форме. 

Примеры:

    dnsdumpster.com
    shodan.io
    censys.io
    crt.sh
    pentest-tools.com

